PUSH BP 
MOV BP, SP
MOV R1, BP
MOV R2, 6
SUB R1, R2 
MOV R2, "Write"
MOV R3, [R1]
EQ R3, R2
JNZ R3, 60
MOV R2, "Read"
MOV R3, [R1]
EQ R3, R2
JNZ R3, 92
MOV R2, "Exit"
MOV R3, [R1]
EQ R3, R2
JNZ R3, 124
MOV R2, "Initialize"
MOV R3, [R1]
EQ R3, R2
JNZ R3, 156
MOV R2, "Alloc"
MOV R3, [R1]
EQ R3, R2
JNZ R3, 208
MOV R2, "Free"
MOV R3, [R1]
EQ R3, R2
JNZ R3, 226
JMP 254
MOV R1, BP 
MOV R2, 5
SUB R1, R2
MOV R2, [R1]
ADD R1, 1
MOV R3, [R1]
ADD R1, 1
MOV R4, [R1]
MOV R5, 5
PUSH R5
PUSH R2
PUSH R3
PUSH R4
PUSH R5
INT 7
JMP 244
MOV R1, BP 
MOV R2, 5
SUB R1, R2
MOV R2, [R1]
ADD R1, 1
MOV R3, [R1]
ADD R1, 1
MOV R4, [R1]
MOV R5, 5
PUSH R5
PUSH R2
PUSH R3
PUSH R4
PUSH R5
INT 6
JMP 244
MOV R1, BP 
MOV R2, 5
SUB R1, R2
MOV R2, [R1]
ADD R1, 1
MOV R3, [R1]
ADD R1, 1
MOV R4, [R1]
MOV R5, 5
PUSH R5
PUSH R2
PUSH R3
PUSH R4
PUSH R5
INT 10
JMP 244
MOV R0,1024
MOV R1,1
MOV [R0],-1
ADD R0,R1
MOV R2,2047
GE R2,R0
JZ R2,172
JMP 160
MOV R0,1024
MOV R1,1032
MOV R3,8
MOV [R0],R1
ADD R1,R3
ADD R0,R3
MOV R2,2047
GE R2,R0
JZ R2,192
JMP 176
MOV [2032],-1
MOV [2040],1024
MOV R2, BP
MOV R3, 2
SUB R2, R3
MOV [R2], 0
POP BP
RET
MOV R0, [2040]
MOV R1, [R0]
MOV [2040], R1
MOV R1, BP
MOV R2, 2
SUB R1, R2
MOV [R1], R0
POP BP
RET
MOV R0, 5
MOV R1, BP
SUB R1, R0
MOV R0, [R1]
MOV R1, [2040]
MOV [2040], R0
MOV [R0], R1
POP BP
RET
POP R1
POP R2
POP R2
POP R2
POP R2
POP BP
MOV R2, BP
MOV R3, 2
SUB R2, R3
MOV [R2], R1
RET